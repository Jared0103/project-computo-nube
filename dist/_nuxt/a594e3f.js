(window.webpackJsonp=window.webpackJsonp||[]).push([[28,8],{462:function(t,e,o){var content=o(485);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(25).default)("a5e6c9e0",content,!0,{sourceMap:!1})},484:function(t,e,o){"use strict";o(462)},485:function(t,e,o){var n=o(24)((function(i){return i[1]}));n.push([t.i,'.quotation-container[data-v-4ce939dc]{background:#f8f8f8;min-height:100vh}.layout-wrapper[data-v-4ce939dc]{display:flex;gap:20px}.sidebar[data-v-4ce939dc]{background:#0f4c75;border-radius:0 50px 0 0;padding:80px 0;width:26%}.nav-content[data-v-4ce939dc]{align-items:center;color:#fff;display:flex;flex-direction:column;font:700 18px Lato,sans-serif}.logo-text[data-v-4ce939dc]{font-size:36px;margin-bottom:114px}.nav-item[data-v-4ce939dc]{margin:29px 0;padding:33px 70px}.nav-item.active[data-v-4ce939dc]{background:#bbe1fa;border-radius:50px 0 0 50px;color:#0f4c75}.main-content[data-v-4ce939dc]{flex:1;margin:0 auto;max-width:1200px;padding:40px;width:80%}.header[data-v-4ce939dc]{align-items:center;display:flex;justify-content:space-between;margin-bottom:88px}.page-title[data-v-4ce939dc]{color:#1b262c;font:700 36px Lato,sans-serif}.user-profile[data-v-4ce939dc]{align-items:center;display:flex;gap:23px}.profile-image[data-v-4ce939dc]{border-radius:50%;height:55px;width:55px}.user-info[data-v-4ce939dc]{display:flex;flex-direction:column}.username[data-v-4ce939dc]{color:#1b262c;font:700 18px Lato,sans-serif}.role[data-v-4ce939dc]{color:#0f4c75;font:700 14px Lato,sans-serif}.quotation-form[data-v-4ce939dc]{background:#fff;border-radius:15px;box-shadow:0 4px 4px rgba(0,0,0,.25);padding:40px}.form-header[data-v-4ce939dc]{margin-bottom:30px}.logo-section[data-v-4ce939dc]{align-items:center;display:flex;justify-content:space-between;margin-bottom:38px}.logo-upload[data-v-4ce939dc]{background:#eee;border:none;border-radius:5px;cursor:pointer;padding:28px 70px}.user-details[data-v-4ce939dc]{text-align:right}.user-name[data-v-4ce939dc]{display:block;margin-bottom:5px}.edit-button[data-v-4ce939dc]{background:none;border:none;color:#0f4c75;cursor:pointer;font-size:10px}.quote-number[data-v-4ce939dc]{align-items:center;display:flex;gap:10px}.number-input[data-v-4ce939dc]{border:1px solid #c4c4c4;border-radius:5px;padding:11px 9px;width:60px}.form-grid[data-v-4ce939dc]{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px;gap:20px}.form-group[data-v-4ce939dc]{display:flex;flex-direction:column;gap:8px}.required-field[data-v-4ce939dc]:after{color:#0f4c75;content:"*";margin-left:5px}.form-input[data-v-4ce939dc],.form-select[data-v-4ce939dc]{border:1px solid #c4c4c4;border-radius:50px;padding:6px 18px}.contact-inputs[data-v-4ce939dc]{display:flex;gap:14px}.search-wrapper[data-v-4ce939dc]{flex:1;position:relative}.search-icon[data-v-4ce939dc]{position:absolute;right:18px;top:50%;transform:translateY(-50%)}.add-client[data-v-4ce939dc]{background:none;border:none;color:#0f4c75;cursor:pointer;font-size:10px}.items-section[data-v-4ce939dc]{margin-top:30px}.items-header[data-v-4ce939dc]{background:#3282b8;border-radius:5px;color:#fff}.item-row[data-v-4ce939dc],.items-header[data-v-4ce939dc]{display:grid;grid-template-columns:repeat(8,1fr);padding:10px;grid-gap:20px;gap:20px}.item-row[data-v-4ce939dc]{border-bottom:1px solid #eee}.item-input[data-v-4ce939dc]{border:1px solid #c4c4c4;border-radius:5px;padding:8px;width:100px}.add-row[data-v-4ce939dc]{align-items:center;background:#3282b8;border:none;border-radius:10px;color:#fff;cursor:pointer;display:flex;gap:15px;margin:20px 0;padding:7px 12px}.summary-section[data-v-4ce939dc]{display:flex;justify-content:space-between;margin:40px 0}.signature-upload[data-v-4ce939dc]{background:#eee;border-radius:5px;padding:28px 56px;text-align:center}.totals[data-v-4ce939dc]{width:300px}.total-row[data-v-4ce939dc]{display:flex;justify-content:space-between;margin-bottom:12px}.grand-total[data-v-4ce939dc]{font-size:18px;font-weight:700;margin-top:20px}.notes-section[data-v-4ce939dc]{margin:30px 0}.notes-input[data-v-4ce939dc]{border:1px solid #9a9a9a;border-radius:5px;height:60px;margin-top:10px;padding:10px;width:100%}.form-actions[data-v-4ce939dc]{display:flex;gap:20px;justify-content:flex-end}.cancel-button[data-v-4ce939dc],.submit-button[data-v-4ce939dc]{border:none;border-radius:5px;color:#fff;cursor:pointer;font:700 16px Nunito,sans-serif;padding:9px 20px}.cancel-button[data-v-4ce939dc]{background:#c4c4c4}.submit-button[data-v-4ce939dc]{background:#3282b8}@media (max-width:991px){.layout-wrapper[data-v-4ce939dc]{flex-direction:column}.sidebar[data-v-4ce939dc]{padding:40px 20px;width:100%}.main-content[data-v-4ce939dc],.nav-item[data-v-4ce939dc]{padding:20px}.form-grid[data-v-4ce939dc]{grid-template-columns:1fr}.item-row[data-v-4ce939dc],.items-header[data-v-4ce939dc]{gap:10px;grid-template-columns:repeat(4,1fr)}.summary-section[data-v-4ce939dc]{flex-direction:column;gap:20px}.totals[data-v-4ce939dc]{width:100%}}',""]),n.locals={},t.exports=n},505:function(t,e,o){"use strict";o.r(e);o(13),o(64),o(5);var n=o(11),r=o(32),c=(o(108),o(160),o(89),o(200),o(109)),d=o.n(c),l={data:function(){return{quoteNumber:"",docType:"cotizacion",selectedContactId:"",clientId:"",phone:"",date:"",dueDate:"",contacts:[],items:[{nombre:"",referencia:"",precio:0,descuento:0,impuesto:"",descripcion:"",cantidad:1}],notes:""}},computed:{calculateSubtotal:function(){var t=this;return this.items.reduce((function(e,o){return e+t.calculateItemTotal(o)}),0)},calculateTotal:function(){return this.calculateSubtotal}},created:function(){this.loadContacts()},methods:{loadContacts:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("http://localhost:3020/api/v1/empleados");case 3:o=e.sent,console.log(o.data),o.data&&Array.isArray(o.data.empleados)?t.contacts=o.data.empleados:o.data&&o.data.empleados&&"object"===Object(n.a)(o.data.empleados)?t.contacts=Object.values(o.data.empleados):console.error("No se encontró la propiedad empleados o no es un arreglo:",o.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error cargando contactos:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchContactInfo:function(){var t=this,e=this.contacts.find((function(e){return e.id===t.selectedContactId}));e?(this.clientId=e.id,this.phone=e.telefono):(this.clientId="",this.phone="")},addNewClient:function(){this.selectedContactId="",this.clientId="",this.phone=""},addItem:function(){this.items.push({nombre:"",referencia:"",precio:0,descuento:0,impuesto:"",descripcion:"",cantidad:1})},calculateItemTotal:function(t){var e=t.precio*t.descuento/100;return(t.precio-e)*t.cantidad},cancel:function(){this.quoteNumber="",this.docType="cotizacion",this.selectedContactId="",this.clientId="",this.phone="",this.date="",this.dueDate="",this.items=[{nombre:"",referencia:"",precio:0,descuento:0,impuesto:"",descripcion:"",cantidad:1}],this.notes=""},getState:function(){var t=new Date,e=new Date(this.date),o=new Date(this.dueDate);return t>=e&&t<=o?"activa":"inactiva"},saveQuotation:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={id:t.quoteNumber,numero:t.quoteNumber,cliente:t.clientId,creacion:t.date,vencimiento:t.dueDate,estado:t.getState(),total:t.calculateTotal,referencia:t.items.map((function(t){return t.referencia})).join(", "),descripcion:t.items.map((function(t){return t.descripcion})).join(", "),cantidad:t.items.map((function(t){return t.cantidad})).join(", "),nota:t.notes},localStorage.setItem("quotation",JSON.stringify(o)),e.prev=2,e.next=5,d.a.post("http://localhost:3020/api/v1/cotizaciones/create",o);case 5:alert("Cotización guardada con éxito"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Error guardando la cotización:",e.t0),alert("Hubo un error al guardar la cotización");case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()},Guradar:function(){this.$router.push("./PrevisualCotizacion")}}},m=(o(484),o(72)),component=Object(m.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"quotation-container"},[e("div",{staticClass:"layout-wrapper"},[e("main",{staticClass:"main-content"},[t._m(0),t._v(" "),e("form",{staticClass:"quotation-form",on:{submit:function(e){return e.preventDefault(),t.saveQuotation.apply(null,arguments)}}},[e("section",{staticClass:"form-header"},[e("div",{staticClass:"logo-section"},[e("button",{staticClass:"logo-upload",attrs:{type:"button",tabindex:"0"}},[t._v("\n              Usar Logo\n            ")]),t._v(" "),t._m(1),t._v(" "),e("div",{staticClass:"quote-number"},[e("label",{attrs:{for:"quoteNum"}},[t._v("No.")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.quoteNumber,expression:"quoteNumber"}],staticClass:"number-input",attrs:{id:"quoteNum",type:"text"},domProps:{value:t.quoteNumber},on:{input:function(e){e.target.composing||(t.quoteNumber=e.target.value)}}}),t._v(" "),e("img",{staticClass:"number-icon",attrs:{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/134297010209f273c3821f73634b87c56dbe29d46b1fafc7ee3bbb4e2aead594",alt:""}})])]),t._v(" "),e("div",{staticClass:"form-grid"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"required-field",attrs:{for:"docType"}},[t._v("Tipo de documento")]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.docType,expression:"docType"}],staticClass:"form-select",attrs:{id:"docType"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.docType=e.target.multiple?o:o[0]}}},[e("option",{attrs:{value:"cotizacion"}},[t._v("\n                    Cotización\n                  ")]),t._v(" "),e("option",{attrs:{value:"orden"}},[t._v("\n                    Orden de servicio\n                  ")])])])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"required-field",attrs:{for:"contact"}},[t._v("Contacto")]),t._v(" "),e("div",{staticClass:"contact-inputs"},[e("div",{staticClass:"search-wrapper"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedContactId,expression:"selectedContactId"}],staticClass:"form-select",attrs:{id:"contact"},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedContactId=e.target.multiple?o:o[0]},t.fetchContactInfo]}},[e("option",{attrs:{value:"",disabled:""}},[t._v("\n                      Seleccionar contacto\n                    ")]),t._v(" "),t._l(t.contacts,(function(o){return e("option",{key:o.id,domProps:{value:o.id}},[t._v("\n                      "+t._s(o.usuario)+"\n                    ")])}))],2)]),t._v(" "),e("button",{staticClass:"add-client",attrs:{type:"button"},on:{click:t.addNewClient}},[t._v("\n                  Agregar nuevo Cliente\n                ")])])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"taxId"}},[t._v("ID Impuesto")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.clientId,expression:"clientId"}],staticClass:"form-input",attrs:{id:"taxId",type:"text",readonly:""},domProps:{value:t.clientId},on:{input:function(e){e.target.composing||(t.clientId=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"phone"}},[t._v("Teléfono")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form-input",attrs:{id:"phone",type:"tel",readonly:""},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"required-field",attrs:{for:"date"}},[t._v("Fecha")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"form-input",attrs:{id:"date",type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"required-field",attrs:{for:"dueDate"}},[t._v("Fecha de Vencimiento")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.dueDate,expression:"dueDate"}],staticClass:"form-input",attrs:{id:"dueDate",type:"date"},domProps:{value:t.dueDate},on:{input:function(e){e.target.composing||(t.dueDate=e.target.value)}}})])])]),t._v(" "),e("section",{staticClass:"items-section"},[t._m(2),t._v(" "),t._l(t.items,(function(o,n){return e("div",{key:n,staticClass:"item-row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:o.nombre,expression:"item.nombre"}],staticClass:"item-input",attrs:{type:"text",placeholder:"Buscar item"},domProps:{value:o.nombre},on:{input:function(e){e.target.composing||t.$set(o,"nombre",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.referencia,expression:"item.referencia"}],staticClass:"item-input",attrs:{type:"text",placeholder:"Referencia"},domProps:{value:o.referencia},on:{input:function(e){e.target.composing||t.$set(o,"referencia",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.precio,expression:"item.precio"}],staticClass:"item-input",attrs:{type:"number",placeholder:"Precio"},domProps:{value:o.precio},on:{input:function(e){e.target.composing||t.$set(o,"precio",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.descuento,expression:"item.descuento"}],staticClass:"item-input",attrs:{type:"number",placeholder:"%"},domProps:{value:o.descuento},on:{input:function(e){e.target.composing||t.$set(o,"descuento",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.impuesto,expression:"item.impuesto"}],staticClass:"item-input",attrs:{type:"text",placeholder:"Impuesto"},domProps:{value:o.impuesto},on:{input:function(e){e.target.composing||t.$set(o,"impuesto",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.descripcion,expression:"item.descripcion"}],staticClass:"item-input",attrs:{type:"text",placeholder:"Descripción"},domProps:{value:o.descripcion},on:{input:function(e){e.target.composing||t.$set(o,"descripcion",e.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:o.cantidad,expression:"item.cantidad"}],staticClass:"item-input",attrs:{type:"number",placeholder:"Cantidad"},domProps:{value:o.cantidad},on:{input:function(e){e.target.composing||t.$set(o,"cantidad",e.target.value)}}}),t._v(" "),e("div",{staticClass:"total-amount"},[t._v("\n              "+t._s(t.calculateItemTotal(o))+"\n            ")])])})),t._v(" "),e("button",{staticClass:"add-row",attrs:{type:"button"},on:{click:t.addItem}},[t._v("\n            Agregar nueva fila\n          ")])],2),t._v(" "),e("section",{staticClass:"summary-section"},[e("div",{staticClass:"totals"},[e("div",{staticClass:"total-row"},[e("span",{staticClass:"total-label"},[t._v("Subtotal")]),t._v(" "),e("span",{staticClass:"total-value"},[t._v(t._s(t.calculateSubtotal))])]),t._v(" "),e("div",{staticClass:"total-row"},[e("span",{staticClass:"total-label"},[t._v("Total")]),t._v(" "),e("span",{staticClass:"total-value"},[t._v(t._s(t.calculateTotal))])])])]),t._v(" "),e("div",{staticClass:"notes-section"},[e("label",{attrs:{for:"notes"}},[t._v("Notas")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notes,expression:"notes"}],staticClass:"notes-input",attrs:{id:"notes"},domProps:{value:t.notes},on:{input:function(e){e.target.composing||(t.notes=e.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-actions"},[e("button",{staticClass:"cancel-button",attrs:{type:"button"},on:{click:t.cancel}},[t._v("\n            Cancelar\n          ")]),t._v(" "),e("button",{staticClass:"submit-button",attrs:{type:"submit"},on:{click:t.Guradar}},[t._v("\n            Guardar\n          ")])])])])])])}),[function(){var t=this._self._c;return t("header",{staticClass:"header"},[t("h1",{staticClass:"page-title"},[this._v("\n          NUEVA COTIZACIÓN\n        ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-details"},[e("span",{staticClass:"user-name"},[t._v("Ricardo Bermudez")]),t._v(" "),e("button",{staticClass:"edit-button",attrs:{type:"button",tabindex:"0"}},[t._v("\n                Editar\n              ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"items-header"},[e("span",{staticClass:"header-item"},[t._v("Item")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Referencia")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Precio")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Desc%")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Impuesto")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Descripción")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Cantidad")]),t._v(" "),e("span",{staticClass:"header-item"},[t._v("Total")])])}],!1,null,"4ce939dc",null);e.default=component.exports},544:function(t,e,o){"use strict";o.r(e);var n={components:{cotizacionForm:o(505).default},layout:"dashboard",middleware:"auth"},r=o(72),component=Object(r.a)(n,(function(){var t=this._self._c;return t("div",[t("cotizacionForm")],1)}),[],!1,null,"6e98fbdd",null);e.default=component.exports}}]);